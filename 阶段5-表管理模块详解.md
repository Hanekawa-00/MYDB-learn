# é˜¶æ®µ5ï¼šè¡¨ç®¡ç†æ¨¡å—è¯¦è§£

## ğŸ“– æ¨¡å—æ¦‚è¿°

è¡¨ç®¡ç†æ¨¡å—ï¼ˆTable Managementï¼Œç®€ç§°TBMï¼‰æ˜¯MYDBæ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£ç®¡ç†æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ã€å­—æ®µå®šä¹‰å’Œè¡¨çº§åˆ«çš„æ•°æ®æ“ä½œã€‚å®ƒä½äºSQLè§£æå±‚å’Œåº•å±‚å­˜å‚¨å±‚ä¹‹é—´ï¼Œèµ·åˆ°æ‰¿ä¸Šå¯ä¸‹çš„å…³é”®ä½œç”¨ã€‚

### ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬é˜¶æ®µçš„å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š
1. æ•°æ®åº“è¡¨å’Œå­—æ®µçš„å†…éƒ¨è¡¨ç¤ºæ–¹æ³•
2. è¡¨ç®¡ç†å™¨çš„æ¶æ„è®¾è®¡å’Œå®ç°åŸç†
3. SQLæ“ä½œï¼ˆCRUDï¼‰åœ¨è¡¨ç®¡ç†å±‚çš„å¤„ç†æµç¨‹
4. ç´¢å¼•ç®¡ç†å’ŒæŸ¥è¯¢ä¼˜åŒ–çš„åŸºæœ¬åŸç†
5. äº‹åŠ¡éš”ç¦»åœ¨è¡¨çº§åˆ«çš„å®ç°æœºåˆ¶

## ğŸ—ï¸ æ¨¡å—æ¶æ„

è¡¨ç®¡ç†æ¨¡å—é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

```mermaid
graph TD
    A[SQLè¯­å¥] --> B[TableManager]
    B --> C[Tableå¯¹è±¡]
    C --> D[Fieldå¯¹è±¡]
    D --> E[B+æ ‘ç´¢å¼•]
    B --> F[Booterå¯åŠ¨å™¨]
    B --> G[ç‰ˆæœ¬ç®¡ç†å™¨VM]
    B --> H[æ•°æ®ç®¡ç†å™¨DM]
    
    style B fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#e8f5e8
```

## ğŸ“‹ ç±»ç»“æ„è¯¦è§£

### 1. BeginRes - äº‹åŠ¡å¼€å§‹ç»“æœ

**ä½œç”¨**ï¼šå°è£…BEGINæ“ä½œçš„è¿”å›ä¿¡æ¯

```java
public class BeginRes {
    public long xid;        // æ–°äº‹åŠ¡çš„ID
    public byte[] result;   // æ“ä½œç»“æœä¿¡æ¯
}
```

**ä¸MySQLå¯¹æ¯”**ï¼š
- **MySQL**ï¼šBEGINåè¿”å›OKåŒ…ï¼ŒåŒ…å«å½±å“è¡Œæ•°ã€è­¦å‘Šç­‰å¤æ‚ä¿¡æ¯
- **MYDB**ï¼šç®€åŒ–è¿”å›ï¼ŒåªåŒ…å«äº‹åŠ¡IDå’ŒåŸºæœ¬ç»“æœ

### 2. FieldCalRes - å­—æ®µè®¡ç®—ç»“æœ

**ä½œç”¨**ï¼šå­˜å‚¨WHEREæ¡ä»¶è®¡ç®—åçš„è®°å½•èŒƒå›´

```java
public class FieldCalRes {
    public long left;   // èŒƒå›´å·¦è¾¹ç•Œ
    public long right;  // èŒƒå›´å³è¾¹ç•Œ
}
```

**åº”ç”¨åœºæ™¯**ï¼š
```sql
-- ä¾‹å¦‚ï¼šSELECT * FROM users WHERE age > 18 AND age < 65
-- ä¼šè®¡ç®—å‡ºæ»¡è¶³æ¡ä»¶çš„è®°å½•UIDèŒƒå›´ï¼š[left, right]
```

### 3. Field - å­—æ®µå®šä¹‰

**ä½œç”¨**ï¼šè¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µï¼ˆåˆ—ï¼‰

#### ğŸ”§ æ ¸å¿ƒå±æ€§

```java
public class Field {
    String fieldName;     // å­—æ®µåç§°ï¼Œå¦‚"id"ã€"name"
    String fieldType;     // å­—æ®µç±»å‹ï¼šint32/int64/string
    private long index;   // ç´¢å¼•UIDï¼Œ0è¡¨ç¤ºæ— ç´¢å¼•
    private BPlusTree bt; // B+æ ‘ç´¢å¼•å¯¹è±¡
}
```

#### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

1. **æ•°æ®ç±»å‹è½¬æ¢**
```java
// å­—ç¬¦ä¸² â†’ Javaå¯¹è±¡
Object value = field.string2Value("123");  // â†’ Integer(123)

// Javaå¯¹è±¡ â†’ å­—èŠ‚æ•°ç»„ï¼ˆå­˜å‚¨æ ¼å¼ï¼‰
byte[] raw = field.value2Raw(123);

// å­—èŠ‚æ•°ç»„ â†’ Javaå¯¹è±¡ï¼ˆè¯»å–æ—¶ï¼‰
ParseValueRes result = field.parserValue(raw);
```

2. **ç´¢å¼•æ“ä½œ**
```java
// æ’å…¥ç´¢å¼•é¡¹
field.insert("å¼ ä¸‰", recordUID);

// èŒƒå›´æŸ¥è¯¢
List<Long> uids = field.search(leftBound, rightBound);
```

3. **WHEREæ¡ä»¶è®¡ç®—**
```java
// è®¡ç®— "age > 18" çš„èŒƒå›´
FieldCalRes result = field.calExp(singleExpression);
// result.left = 19, result.right = Long.MAX_VALUE
```

#### ğŸ†š ä¸MySQLå­—æ®µå¯¹æ¯”

| æ–¹é¢ | MYDB Field | MySQL Column |
|------|------------|--------------|
| **ç±»å‹ç³»ç»Ÿ** | 3ç§åŸºç¡€ç±»å‹ | ä¸°å¯Œçš„æ•°æ®ç±»å‹ |
| **ç´¢å¼•ç»‘å®š** | å­—æ®µç›´æ¥ç®¡ç†ç´¢å¼• | ç´¢å¼•ç‹¬ç«‹ç®¡ç† |
| **å­˜å‚¨æ ¼å¼** | ç®€å•çš„å­—èŠ‚åºåˆ—åŒ– | å¤æ‚çš„è¡Œæ ¼å¼ |
| **ç±»å‹æ£€æŸ¥** | è¿è¡Œæ—¶æ£€æŸ¥ | ç¼–è¯‘æ—¶+è¿è¡Œæ—¶æ£€æŸ¥ |

### 4. Table - è¡¨å®šä¹‰

**ä½œç”¨**ï¼šè¡¨ç¤ºæ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼Œç®¡ç†è¡¨ç»“æ„å’Œæ•°æ®æ“ä½œ

#### ğŸ”§ æ ¸å¿ƒå±æ€§

```java
public class Table {
    String name;                    // è¡¨å
    long nextUid;                   // ä¸‹ä¸€ä¸ªè¡¨çš„UIDï¼ˆé“¾è¡¨ç»“æ„ï¼‰
    List<Field> fields;             // å­—æ®µåˆ—è¡¨
    TableManager tbm;               // è¡¨ç®¡ç†å™¨å¼•ç”¨
}
```

#### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

1. **è¡¨çš„åˆ›å»ºå’ŒåŠ è½½**
```java
// åˆ›å»ºæ–°è¡¨
Table table = Table.createTable(tbm, nextUid, xid, createStatement);

// åŠ è½½å·²å­˜åœ¨çš„è¡¨
Table table = Table.loadTable(tbm, tableUID);
```

2. **CRUDæ“ä½œ**
```java
// æ’å…¥æ•°æ®
table.insert(xid, insertStatement);

// æŸ¥è¯¢æ•°æ®
String result = table.read(xid, selectStatement);

// æ›´æ–°æ•°æ®ï¼ˆåˆ é™¤+æ’å…¥ï¼‰
int count = table.update(xid, updateStatement);

// åˆ é™¤æ•°æ®
int count = table.delete(xid, deleteStatement);
```

3. **WHEREå­å¥å¤„ç†**
```java
// è§£æWHEREæ¡ä»¶ï¼Œè¿”å›æ»¡è¶³æ¡ä»¶çš„è®°å½•UIDåˆ—è¡¨
List<Long> uids = parseWhere(whereClause);
```

#### ğŸ“¦ æŒä¹…åŒ–æ ¼å¼

è¡¨ä¿¡æ¯åœ¨å­˜å‚¨ä¸­çš„æ ¼å¼ï¼š
```
[TableName][NextTableUID][Field1UID][Field2UID]...[FieldNUID]
```

#### ğŸ†š ä¸MySQLè¡¨å¯¹æ¯”

| æ–¹é¢ | MYDB Table | MySQL Table |
|------|------------|-------------|
| **å…ƒä¿¡æ¯å­˜å‚¨** | ç›´æ¥å­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶ | .frmæ–‡ä»¶ + æ•°æ®å­—å…¸ |
| **è¡¨ç»„ç»‡** | é“¾è¡¨ç»“æ„ | ç›®å½•+æ–‡ä»¶ç»“æ„ |
| **å­—æ®µç®¡ç†** | å†…å­˜ä¸­çš„List | å¤æ‚çš„å­—æ®µæè¿°ç¬¦ |
| **æ›´æ–°ç­–ç•¥** | åˆ é™¤+æ’å…¥ | åŸåœ°æ›´æ–° |

### 5. Booter - è¡¨ç®¡ç†å¯åŠ¨å™¨

**ä½œç”¨**ï¼šç®¡ç†è¡¨ç®¡ç†æ¨¡å—çš„å¯åŠ¨ä¿¡æ¯ï¼Œè®°å½•ç¬¬ä¸€ä¸ªè¡¨çš„UID

#### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

```java
// åˆ›å»ºæ–°çš„booteræ–‡ä»¶
Booter booter = Booter.create("/path/to/db");

// æ‰“å¼€å·²å­˜åœ¨çš„booteræ–‡ä»¶
Booter booter = Booter.open("/path/to/db");

// åŸå­æ€§æ›´æ–°
booter.update(newData);
```

#### ğŸ”’ åŸå­æ€§ä¿è¯

Booterä½¿ç”¨**ä¸´æ—¶æ–‡ä»¶+é‡å‘½å**çš„æ–¹å¼ä¿è¯æ›´æ–°çš„åŸå­æ€§ï¼š

```java
1. å†™å…¥æ•°æ®åˆ° .bt_tmp æ–‡ä»¶
2. åˆ·æ–°åˆ°ç£ç›˜
3. åŸå­æ€§é‡å‘½åï¼š.bt_tmp â†’ .bt
4. åˆ é™¤ä¸´æ—¶æ–‡ä»¶
```

#### ğŸ†š ä¸MySQLå¯¹æ¯”

| æ–¹é¢ | MYDB Booter | MySQL |
|------|-------------|--------|
| **å…ƒä¿¡æ¯ç®¡ç†** | å•ä¸€booteræ–‡ä»¶ | å¤šä¸ªç³»ç»Ÿè¡¨ |
| **åŸå­æ€§** | æ–‡ä»¶é‡å‘½å | äº‹åŠ¡æ—¥å¿— |
| **æ¢å¤æœºåˆ¶** | åˆ é™¤ä¸´æ—¶æ–‡ä»¶ | å¤æ‚çš„å´©æºƒæ¢å¤ |

### 6. TableManager - è¡¨ç®¡ç†å™¨æ¥å£

**ä½œç”¨**ï¼šå®šä¹‰è¡¨ç®¡ç†çš„æ‰€æœ‰æ“ä½œæ¥å£

#### ğŸ¯ æ ¸å¿ƒæ–¹æ³•

```java
public interface TableManager {
    // äº‹åŠ¡ç®¡ç†
    BeginRes begin(Begin begin);
    byte[] commit(long xid);
    byte[] abort(long xid);
    
    // DDLæ“ä½œ
    byte[] show(long xid);
    byte[] create(long xid, Create create);
    
    // DMLæ“ä½œ
    byte[] insert(long xid, Insert insert);
    byte[] read(long xid, Select select);
    byte[] update(long xid, Update update);
    byte[] delete(long xid, Delete delete);
}
```

### 7. TableManagerImpl - è¡¨ç®¡ç†å™¨å®ç°

**ä½œç”¨**ï¼šTableManageræ¥å£çš„å…·ä½“å®ç°ï¼Œåè°ƒå„ä¸ªç»„ä»¶

#### ğŸ”§ æ ¸å¿ƒå±æ€§

```java
public class TableManagerImpl implements TableManager {
    VersionManager vm;                      // ç‰ˆæœ¬ç®¡ç†å™¨
    DataManager dm;                         // æ•°æ®ç®¡ç†å™¨
    private Booter booter;                  // å¯åŠ¨å™¨
    private Map<String, Table> tableCache;  // è¡¨ç¼“å­˜
    private Map<Long, List<Table>> xidTableCache; // äº‹åŠ¡è¡¨ç¼“å­˜
    private Lock lock;                      // å¹¶å‘æ§åˆ¶é”
}
```

#### ğŸ¯ å…³é”®è®¾è®¡

1. **è¡¨ç¼“å­˜æœºåˆ¶**
```java
// å·²æäº¤çš„è¡¨
tableCache.put("users", userTable);

// äº‹åŠ¡åˆ›å»ºçš„æœªæäº¤è¡¨
xidTableCache.get(xid).add(newTable);
```

2. **è¡¨é“¾è¡¨ç®¡ç†**
```java
// æ–°è¡¨æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨
Table newTable = Table.createTable(this, firstTableUid(), xid, create);
updateFirstTableUid(newTable.uid);
```

3. **äº‹åŠ¡éš”ç¦»**
```java
// SHOW TABLES åªæ˜¾ç¤ºï¼š
// 1. å·²æäº¤çš„è¡¨
// 2. å½“å‰äº‹åŠ¡åˆ›å»ºçš„è¡¨
```

## ğŸ”„ å·¥ä½œæµç¨‹è¯¦è§£

### 1. è¡¨åˆ›å»ºæµç¨‹

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant TM as TableManager
    participant Table as Table
    participant Field as Field
    participant VM as VersionManager
    
    Client->>TM: CREATE TABLE users(id int32, name string)
    TM->>TM: æ£€æŸ¥è¡¨åæ˜¯å¦å­˜åœ¨
    TM->>Table: createTable()
    Table->>Field: createField() for each column
    Field->>VM: æŒä¹…åŒ–å­—æ®µä¿¡æ¯
    Table->>VM: æŒä¹…åŒ–è¡¨ä¿¡æ¯
    TM->>TM: æ›´æ–°è¡¨é“¾è¡¨
    TM->>TM: åŠ å…¥è¡¨ç¼“å­˜
    TM-->>Client: è¿”å›åˆ›å»ºç»“æœ
```

### 2. æ•°æ®æŸ¥è¯¢æµç¨‹

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant TM as TableManager
    participant Table as Table
    participant Field as Field
    participant Index as B+æ ‘ç´¢å¼•
    
    Client->>TM: SELECT * FROM users WHERE age > 18
    TM->>TM: æŸ¥æ‰¾è¡¨ç¼“å­˜
    TM->>Table: read()
    Table->>Table: parseWhere()
    Table->>Field: calExp() è®¡ç®—èŒƒå›´
    Field->>Index: search() ç´¢å¼•æŸ¥è¯¢
    Index-->>Field: è¿”å›è®°å½•UIDåˆ—è¡¨
    Table->>Table: è¯»å–è®°å½•å†…å®¹
    Table-->>TM: è¿”å›æŸ¥è¯¢ç»“æœ
    TM-->>Client: æ ¼å¼åŒ–ç»“æœ
```

### 3. æ•°æ®æ›´æ–°æµç¨‹

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant TM as TableManager
    participant Table as Table
    participant VM as VersionManager
    
    Client->>TM: UPDATE users SET name='å¼ ä¸‰' WHERE id=1
    TM->>Table: update()
    Table->>Table: parseWhere() æ‰¾åˆ°ç›®æ ‡è®°å½•
    loop å¯¹æ¯æ¡è®°å½•
        Table->>VM: delete() åˆ é™¤æ—§è®°å½•
        Table->>VM: insert() æ’å…¥æ–°è®°å½•
        Table->>Table: æ›´æ–°ç´¢å¼•
    end
    Table-->>TM: è¿”å›æ›´æ–°è®°å½•æ•°
    TM-->>Client: è¿”å›ç»“æœ
```

## ğŸ” æ ¸å¿ƒç®—æ³•è¯¦è§£

### 1. WHEREæ¡ä»¶ä¼˜åŒ–

MYDBå®ç°äº†ç®€åŒ–çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼š

```java
// ANDæ“ä½œï¼šè®¡ç®—äº¤é›†
if (logicOp.equals("and")) {
    FieldCalRes range1 = field.calExp(exp1);  // age > 18
    FieldCalRes range2 = field.calExp(exp2);  // age < 65
    
    // å–äº¤é›†
    left = Math.max(range1.left, range2.left);   // max(19, 0) = 19
    right = Math.min(range1.right, range2.right); // min(MAX, 64) = 64
}

// ORæ“ä½œï¼šéœ€è¦ä¸¤æ¬¡æŸ¥è¯¢
if (logicOp.equals("or")) {
    List<Long> result1 = field.search(range1.left, range1.right);
    List<Long> result2 = field.search(range2.left, range2.right);
    result1.addAll(result2);  // åˆå¹¶ç»“æœ
}
```

### 2. ç´¢å¼•æŸ¥è¯¢æµç¨‹

```java
// 1. è¡¨è¾¾å¼è®¡ç®—
FieldCalRes range = field.calExp("age > 18");
// range.left = 19, range.right = Long.MAX_VALUE

// 2. ç´¢å¼•èŒƒå›´æ‰«æ
List<Long> recordUIDs = bPlusTree.searchRange(19, Long.MAX_VALUE);

// 3. æ ¹æ®UIDè¯»å–è®°å½•
for (Long uid : recordUIDs) {
    byte[] recordData = vm.read(xid, uid);
    if (recordData != null) {
        // è§£æå¹¶è¿”å›è®°å½•
    }
}
```

## ğŸ’¡ è®¾è®¡äº®ç‚¹ä¸åˆ›æ–°

### 1. ç®€åŒ–çš„è¡¨ç»„ç»‡ç»“æ„

**ä¼ ç»Ÿæ•°æ®åº“**ï¼šå¤æ‚çš„ç›®å½•ç»“æ„ + å¤šä¸ªæ–‡ä»¶
```
database/
â”œâ”€â”€ table1.frm      # è¡¨ç»“æ„æ–‡ä»¶
â”œâ”€â”€ table1.MYD      # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ table1.MYI      # ç´¢å¼•æ–‡ä»¶
â””â”€â”€ ...
```

**MYDBè®¾è®¡**ï¼šç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç† + é“¾è¡¨ç»„ç»‡
```
æ‰€æœ‰è¡¨é€šè¿‡é“¾è¡¨è¿æ¥ï¼šTable1 â†’ Table2 â†’ Table3 â†’ 0
æ¯ä¸ªè¡¨çš„ä¿¡æ¯å­˜å‚¨åœ¨ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿä¸­
```

### 2. äº‹åŠ¡çº§è¡¨éš”ç¦»

```java
// å·²æäº¤çš„è¡¨ï¼šæ‰€æœ‰äº‹åŠ¡å¯è§
Map<String, Table> tableCache;

// äº‹åŠ¡åˆ›å»ºçš„è¡¨ï¼šåªå¯¹åˆ›å»ºäº‹åŠ¡å¯è§
Map<Long, List<Table>> xidTableCache;
```

è¿™ç§è®¾è®¡å®ç°äº†è¡¨çº§åˆ«çš„äº‹åŠ¡éš”ç¦»ï¼Œé˜²æ­¢æœªæäº¤çš„è¡¨ç»“æ„å˜æ›´å½±å“å…¶ä»–äº‹åŠ¡ã€‚

### 3. ç»Ÿä¸€çš„MVCCæ›´æ–°ç­–ç•¥

```java
// æ›´æ–°æ“ä½œ = åˆ é™¤ + æ’å…¥
public int update(long xid, Update update) {
    // 1. è¯»å–åŸè®°å½•
    byte[] oldData = vm.read(xid, recordUID);
    
    // 2. åˆ é™¤åŸè®°å½•ï¼ˆMVCCæ ‡è®°åˆ é™¤ï¼‰
    vm.delete(xid, recordUID);
    
    // 3. æ’å…¥æ–°è®°å½•
    long newUID = vm.insert(xid, newData);
    
    // 4. æ›´æ–°ç´¢å¼•
    updateAllIndexes(newUID, newData);
}
```

## ğŸ”§ ä¸MySQLçš„æ·±åº¦å¯¹æ¯”

### æ¶æ„å±‚é¢

| ç»´åº¦ | MYDB | MySQL InnoDB |
|------|------|--------------|
| **è¡¨ç»„ç»‡** | é“¾è¡¨ + ç‰ˆæœ¬ç®¡ç† | ç‹¬ç«‹æ–‡ä»¶ + æ•°æ®å­—å…¸ |
| **å…ƒä¿¡æ¯** | ç»Ÿä¸€å­˜å‚¨ | .frm + information_schema |
| **ç´¢å¼•ç®¡ç†** | å­—æ®µå†…ç½® | ç‹¬ç«‹çš„ç´¢å¼•å­ç³»ç»Ÿ |
| **æ›´æ–°ç­–ç•¥** | ä¸€å¾‹åˆ é™¤+æ’å…¥ | åŸåœ°æ›´æ–° + undo log |

### åŠŸèƒ½å±‚é¢

| åŠŸèƒ½ | MYDBå®ç° | MySQLå®ç° | å¤æ‚åº¦å¯¹æ¯” |
|------|----------|-----------|------------|
| **å­—æ®µç±»å‹** | 3ç§åŸºç¡€ç±»å‹ | 50+ç§æ•°æ®ç±»å‹ | ç®€åŒ– |
| **çº¦æŸæ£€æŸ¥** | åŸºç¡€ç±»å‹æ£€æŸ¥ | å®Œæ•´çº¦æŸç³»ç»Ÿ | å¤§å¹…ç®€åŒ– |
| **æŸ¥è¯¢ä¼˜åŒ–** | åŸºäºç´¢å¼•çš„èŒƒå›´æŸ¥è¯¢ | å¤æ‚çš„æˆæœ¬ä¼˜åŒ–å™¨ | ç®€åŒ– |
| **å¹¶å‘æ§åˆ¶** | ç²—ç²’åº¦è¡¨é” | ç»†ç²’åº¦è¡Œé” | ç®€åŒ– |

### æ€§èƒ½å±‚é¢

| æ–¹é¢ | MYDB | MySQL | è¯´æ˜ |
|------|------|--------|------|
| **è¡¨æ‰«æ** | å…¨ç´¢å¼•æ‰«æ | è¡¨æ‰«æ + ç´¢å¼•æ‰«æ | MYDBä¾èµ–ç´¢å¼• |
| **å†…å­˜ä½¿ç”¨** | ç®€å•ç¼“å­˜ | å¤æ‚çš„Buffer Pool | MySQLæ›´ä¼˜åŒ– |
| **ç£ç›˜IO** | ç‰ˆæœ¬ç®¡ç†ç»Ÿä¸€è°ƒåº¦ | å¤šå±‚ç¼“å­˜ä¼˜åŒ– | å„æœ‰ä¼˜åŠ¿ |

## ğŸš€ å®è·µå»ºè®®

### å¯¹äºåˆå­¦è€…

1. **ç†è§£æ ¸å¿ƒæ¦‚å¿µ**
   - ä»Fieldç±»å¼€å§‹ï¼Œç†è§£å­—æ®µçš„å†…éƒ¨è¡¨ç¤º
   - æŒæ¡Tableç±»çš„CRUDæ“ä½œæµç¨‹
   - ç†è§£TableManagerçš„åè°ƒä½œç”¨

2. **åŠ¨æ‰‹å®éªŒ**
   ```java
   // å°è¯•åˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨
   CREATE TABLE test(id int32, name string, age int32);
   
   // è§‚å¯Ÿè¡¨çš„å†…éƒ¨ç»“æ„
   // åˆ†æFieldå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹
   // ç†è§£ç´¢å¼•çš„å·¥ä½œåŸç†
   ```

3. **å¯¹æ¯”å­¦ä¹ **
   - å¯¹æ¯”MYDBå’ŒMySQLçš„CREATE TABLEè¿‡ç¨‹
   - åˆ†æWHEREå­å¥çš„ä¼˜åŒ–å·®å¼‚
   - ç†è§£äº‹åŠ¡éš”ç¦»çš„ä¸åŒå®ç°

### è¿›é˜¶å­¦ä¹ 

1. **æ€§èƒ½ä¼˜åŒ–**
   - åˆ†æè¡¨æ‰«æçš„æ€§èƒ½ç“¶é¢ˆ
   - æ€è€ƒç¼“å­˜ç­–ç•¥çš„æ”¹è¿›æ–¹æ¡ˆ
   - ç ”ç©¶æŸ¥è¯¢ä¼˜åŒ–çš„å¯èƒ½æ€§

2. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ æ–°çš„æ•°æ®ç±»å‹æ”¯æŒ
   - å®ç°æ›´å¤æ‚çš„WHEREæ¡ä»¶
   - æ”¯æŒå¤šè¡¨å…³è”æŸ¥è¯¢

## ğŸ“ æ€»ç»“

è¡¨ç®¡ç†æ¨¡å—æ˜¯MYDBçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒé€šè¿‡ç®€åŒ–è®¾è®¡å®ç°äº†å…³ç³»å‹æ•°æ®åº“çš„åŸºæœ¬åŠŸèƒ½ï¼š

**æ ¸å¿ƒä»·å€¼**ï¼š
- æä¾›äº†å®Œæ•´çš„è¡¨å’Œå­—æ®µç®¡ç†åŠŸèƒ½
- å®ç°äº†åŸºæœ¬çš„SQLæ“ä½œæ”¯æŒ
- é›†æˆäº†ç´¢å¼•å’Œäº‹åŠ¡ç®¡ç†

**è®¾è®¡ä¼˜åŠ¿**ï¼š
- æ¶æ„ç®€æ´ï¼Œæ˜“äºç†è§£å’Œæ‰©å±•
- ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†ï¼Œç®€åŒ–äº†å®ç°å¤æ‚åº¦
- è‰¯å¥½çš„æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£æ¸…æ™°

**å­¦ä¹ æ„ä¹‰**ï¼š
- å¸®åŠ©ç†è§£æ•°æ®åº“è¡¨ç®¡ç†çš„åŸºæœ¬åŸç†
- å±•ç¤ºäº†å¦‚ä½•å°†å¤æ‚çš„æ•°æ®åº“åŠŸèƒ½æ¨¡å—åŒ–
- ä¸ºè¿›ä¸€æ­¥å­¦ä¹ é«˜çº§æ•°æ®åº“ç‰¹æ€§æ‰“ä¸‹åŸºç¡€

é€šè¿‡å­¦ä¹ è¿™ä¸ªæ¨¡å—ï¼Œä½ å°†å¯¹æ•°æ®åº“çš„å†…éƒ¨å·¥ä½œåŸç†æœ‰æ›´æ·±å…¥çš„ç†è§£ï¼Œä¸ºåç»­å­¦ä¹ ç´¢å¼•ç®¡ç†ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰é«˜çº§ä¸»é¢˜åšå¥½å‡†å¤‡ã€‚